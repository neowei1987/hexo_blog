---
title: 概率相关问题
date: 2022-02-27 21:11:03
categories:
- 数据结构与算法
tags: 
- 概率
---

#### 根据1到m生成1到n随机数

问题1： 给定一个函数rand()能产生1到m之间的等概率随机数，产生1到n之间等概率的随机数？

```cpp
int rand10()
{
int x;
do
{
    x = (rand7()-1)*7+rand7();
}while(x > 40)  //【1, 40】的范围
return (x-1） / 4+1; //分为10段，0～9 + 1 =》 1 ～ 10
}
```

考虑如果rand（）返回的是浮点呢？

这种情况下可以简化为，如何把[a,b]线段上的点等概率的映射到[c,d]

另外， 为啥不能考虑rand（） \* rand()呢？

因为不等概率，7*6与6*7的计算结果都是42，这样子就使得出现42的概率是1/49 + 1/49；出现1的概率是1/49。

参考：

https://www.cnblogs.com/double-win/archive/2014/04/07/3650314.html

https://my.oschina.net/u/4401597/blog/4038277

#### p & 1 -p 生成等概率

问题2： 有一个随机生成器randA()，以p的概率返回0，1-p的概率返回1，利用这个randA()构造randB()，使randB()等概率的返回0和1，即0.5的概率返回0，0.5的概率返回1。

分析比较简单： 出现00的概率是p^2; 出现10的概率是p*(1-p)，出现01的概率是p*(1-p); 出现11的概率是（1-p）^2;

以上，只要丢弃掉00，01的结果； 10与01的出现概率就是相等的；也就各为50%。

```cpp
int randB()
{
int x1, x2;
do
{
    x1 = randA();
    x2 = randA();
}while(x1+x2 != 1)
return x1;
}
```

#### Shuffle算法

一个从1到n的序列，随机打乱，保证每个数出现在任意一个位置的概率相同。

```cpp
// 得到一个在闭区间 [min, max] 内的随机整数
int randInt(int min, int max);

void shuffle(int[] arr) {
    int n = arr.length();
    for (int i = 0 ; i < n; i++) {
        // 从 i 到最后随机选一个元素
        int rand = randInt(i, n - 1);
        swap(arr[i], arr[rand]);
    }
}
```

#### N个数随机选M

问题3： 程序的输入包含两个整数m和n，其中$m \lt n $。输出是0~n-1范围内m个随机整数的有序列表，不允许重复。从概率的角度来说，我们希望得到没有重复的选择，其中每个选择出现的概率相等。

选出这个序列的概率是：$m/n * (m-1) / (n-1) * ... *  (1)/(n-m)$

```cpp
void generate(int m,int n)
{
int t = m;
for(int i = 0; i < n; i++)
    if(Rand(0,n-1-i) < t) //即以t/(n-i)的概率执行下面的语句
    {
        printf("%d\n",i);
        t--;
    }
}
//随着算法继续，i越大，rand（0，n-1-i)得到的数值越小，就容易被选中，
//如果i已经等于n-1-t了，则后面的必然全不都被选中。
```

#### 蓄水池采样算法

问题4： 如何数据流中随机选出N个元素

蓄水池采样算法，具体步骤如下：

（1）先把N个坑位填上

（2）对于后面新来的第i元素，做如下概率处理：令X=rand(0, i), i > N

A. 如果X在[0, N]之间，则用swap(X, i)

B. 否则啥也不做

深入一下，分布式蓄水池算法： https://www.jianshu.com/p/7a9ea6ece2af


### 概率分布

男孩女孩问题

如果一个地区所有人都生了女孩就继续生，直到生出男孩立马停下，这个地区会趋于什么样的男女比例？ 

1:1 ，几何分布

https://www.zhihu.com/question/355605125

一根绳子分三段，能够合成三角形的概率

线性规划 + 几何概率， 1/4

如果在高速公路上30分钟内到一辆车开过的几率是0.95，那么在10分钟内看到一辆车开过的几率是多