---
title: 高性能服务器设计-littile's raw定律
date: 2022-02-25 13:40:03
mathjax: true
categories:
- 
tags: 
- 
---

并发 = rt * qps

#### N = X * R

N表示系统中同时活动的用户，包括正在处理中和队列中的；X表示用户相继到达系统的速率，在平衡状态时即为系统吞吐量（到达=离开）；R表示每个用户在系统中平均的驻留时间

eg. 一个请求在系统中的停留时间，1s; 一秒钟平均过来100个请求（当然一秒钟也会离开100个请求）那么系统同时处理的请求数是多少？

应该是1s * 100 (个/s) = 100个。

#### Eric的估算公式 C = L * n / T

L表示同时在线；n表示平均停留时间；T表示高峰期持续时间；C为并发用户数量。

eg. 一个用户在系统中的停留时间，30分钟；晚高峰5～7点，有500在线；问系统的并发用户是多少？

假设系统后端维护session，那么这个session的长度即为30分钟，L=30minutes；用户活跃时长已经得知是从5点到7点共2个小时，T=2 hours；那么并发用户数C=n*L/T=500*30/(5*60)=50

#### 等价性说明

我们再来从另外的角度分解Eric的估算公式：

C=n*L/T  可以表示为  C=(n/T)*L

n/T 是不是和我们刚才在上面Little中第一步一样，是计算到达率X的。

而L不就是R吗？都等同于session的长度。

也就是说C=(n/T)*T=X*R=N

结论：由以上得知，Eric's 估算公式跟Little定律是等价的.

参考：https://www.cnblogs.com/hundredsofyears/p/3360305.html