---
title: 消息队列-概览
date: 2022-02-25 13:03:03
mathjax: true
categories:
- 
tags: 
- 
---

可能的一些作用：

1. 实现异步，追求高性能
2. 解除耦合
3. 实现广播

---

具体可以用于：

1. 分布式事务，单方生产，多个消费业务逻辑
2. 数据复制：通过消息队列，将数据复制到多个目的地（多维度数据表、ES、Hadoop、搜索等）
3. 日志同步：多个app生产日志并放入队列，然后消费队列完成日志的离线与实时处理
4. 延迟队列：可靠的延迟队列，分布式环境定时器
5. 广播通知：Cache失效通知

---

分布式消息队列的评价指标

##### 可靠

分布式消息队列提供更好的可靠性，主要体现在：

1. 消息会被持久化到分布式存储中。这样避免了单台机器存储的消息由于机器问题导致消息的丢失；
2. 不佳的网络环境中，保证只有当消息的接收者确实收到消息时才从队列中删除消息。

##### 可扩展

可扩展性体现在访问量和数据量两个方面：

访问量：分布式消息队列服务，会随着访问量的增减而自动增减逻辑处理服务器；

数据量：当数据量扩大时，后端分布式存储会自动扩容。

##### 安全

安全体现在以下两个方面：

1. 同时使用消息队列的业务之间不会互相干扰。如果有多个业务同时在使用消息队列，对于单机的消息队列服务，一个业务的消息操作可能会影响其他业务的正常运行。比如，一个业务的消息操作特别频繁，占据了消息队列的绝大部分服务时间，也占据了这台服务器的绝大部分网络IO，导致其他业务无法正常地与消息队列通信。而且甚至可能由于服务控制不当，导致机器崩溃，服务停止，业务也跟着停止。分布式消息队列则不会出现这个问题：
（1）监控措施完善，系统性能指数会控制在一定范围之内，而且有任何异常也会报警；
（2）当访问量和数据量增大时，分布式消息队列服务可以自动扩展。

2. 各业务的消息内容是安全存储的，其他业务不能访问到非自身业务的数据。
一方面是业务需要密钥来访问消息队列；另一方面，消息是被加密存储的。

##### 简单实用

简单实用体现在：

1. 透明：接收者和发送者无需知道具体的消息队列的服务器地址，服务器的增减对接收者和发送者透明。
2. 实用：对于两个服务之间不能通信的网络情况，消息队列为他们提供了恰到好处的桥梁。
